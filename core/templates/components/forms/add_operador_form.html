<form method="post" id="{{ form_id }}">
    {% csrf_token %}
    <div class="mb-3">
        <label for="operador-cedula" class="form-label text-bold">Cedula</label>
        {{ operador.cedula }}
        {% for error in operador.cedula.errors %}
            <p class="help is-danger">{{ error }}</p>
        {% endfor %}

    </div>
    <div class="mb-3">
        <label for="operador-nombres" class="form-label text-bold">Nombres</label>
        {{ operador.nombres }}
        {% for error in operador.nombres.errors %}
            <p class="help is-danger">{{ error }}</p>
        {% endfor %}
    </div>
    <div class="mb-3">
        <label for="operador-apellidos" class="form-label text-bold">Apellidos</label>
        {{ operador.apellidos }}
        {% for error in operador.apellidos.errors %}
            <p class="help is-danger">{{ error }}</p>
        {% endfor %}
    </div>
    <div class="mb-3">
        <label for="operador-codigoDinomi" class="form-label text-bold">Codigo Dinomi</label>
        {{ operador.codigoDinomi }}
        {% for error in operador.codigoDinomi.errors %}
            <p class="help is-danger">{{ error }}</p>
        {% endfor %}
    </div>
    <div class="mb-3">
        <label for="operador-correo" class="form-label text-bold">Correo</label>
        {{ operador.correo }}
        {% for error in operador.correo.errors %}
            <p class="help is-danger">{{ error }}</p>
        {% endfor %}
    </div>    
    <div class="mb-3">
        <label for="operador-lider" class="form-label text-bold">Lider</label>
        {{ operador.lideres }}
        {% for error in operador.lideres.errors %}
            <p class="help is-danger">{{ error }}</p>
        {% endfor %}
    </div> 
    <div class="mb-3">
        <label for="operador-password" class="form-label text-bold">
            Password
            <button type="button" class=" bg-transparent text-white " onmouseover="spinIcon(this)" onmouseout="stopSpinIcon(this)" onclick="handleGenerator()">
                <i class="fa-solid fa-sync"></i>
            </button>
        </label>
        <div class="row align-items-center">

            <div class="col-10"> 
                {{ operador.password }}
            </div>
            <div class="col-2"> 
                <button type="button"  class="bg-transparent text-white " onmouseover="beatfadeIcon(this)" onmouseout="stopBeatfadeIcon(this)" onclick="copyToClipboard()">
                    <i class="fas fa-copy "  ></i>
                </button>
            </div>
            {% for error in operador.password.errors %}
            <p class="help is-danger">{{ error }}</p>
            {% endfor %}
        </div>
    </div>
    
    <div>
        {{ operador.id }}
    </div>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const liderSelector = document.getElementById('operador-lider');
        
        const defaultOption = new Option('Seleccione un líder', '', false, false);
        defaultOption.disabled = true;
        
        // Insertar la opción al inicio del select
        if (liderSelector.firstChild) {
            liderSelector.insertBefore(defaultOption, liderSelector.firstChild);
        } else {
            liderSelector.appendChild(defaultOption);
        }
        liderSelector.selectedIndex = 0;
    });
    

    function handleGenerator() {
        const fieldPasswordGenerator = document.getElementById("operador-password");
        console.log("clicked");
        fieldPasswordGenerator.value = generateRandomPassword(10);
    }

    function generateRandomPassword(length) {
        const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+=';
        let password = '';
        for (let i = 0; i < length; i++) {
            const randomIndex = Math.floor(Math.random() * characters.length);
            password += characters[randomIndex];
        }
        return password;
    }

    function copyToClipboard() {
        const passwordField = document.getElementById("operador-password");
        passwordField.select();
        passwordField.setSelectionRange(0, 99999); // For mobile devices
        document.execCommand("copy");
        alert("Contraseña copiada al portapapeles!");
    }

    function spinIcon(element) {
        element.firstChild.classList.add('fa-spin');
    }

    function stopSpinIcon(element) {
        element.firstChild.classList.remove('fa-spin');
    }

    function beatfadeIcon(element) {
        element.firstChild.classList.add('fa-beat-fade');
    }

    function stopBeatfadeIcon(element) {
        element.firstChild.classList.remove('fa-beat-fade');
    }

</script>